# テスト決定表 (Test Decision Table)

## 商品管理システム テスト決定表

### 1. 単体テスト決定表

| テストケース | アプリ起動 | DB接続 | 商品データ | 期待結果 | アクション |
|-------------|-----------|--------|-----------|----------|-----------|
| TC001 | ✅ | ✅ | あり | PASS | 正常テスト実行 |
| TC002 | ✅ | ✅ | なし | PASS | 初期データ作成後テスト |
| TC003 | ✅ | ❌ | - | FAIL | DB接続エラー報告 |
| TC004 | ❌ | - | - | FAIL | アプリ起動エラー報告 |

### 2. 統合テスト決定表

| 条件 | アプリ起動 | SQL Server | ブラウザ | スクリーンショット | テスト結果 | レポート生成 |
|------|-----------|------------|----------|-------------------|-----------|-------------|
| C1 | ✅ | ✅ | ✅ | ✅ | PASS | PDF + Excel + CSV |
| C2 | ✅ | ✅ | ✅ | ❌ | PASS | PDF + Excel (画像なし) |
| C3 | ✅ | ✅ | ❌ | ❌ | FAIL | エラーレポートのみ |
| C4 | ✅ | ❌ | - | - | FAIL | DB接続エラーレポート |
| C5 | ❌ | - | - | - | FAIL | アプリ起動失敗レポート |

### 3. CI/CD パイプライン決定表

| ブランチ | PR | テスト結果 | セキュリティ | ビルド | デプロイ | 通知 |
|---------|----|-----------|-----------|---------|---------|----|
| main | No | PASS | PASS | SUCCESS | 実行 | ✅ 成功 |
| main | No | PASS | FAIL | SUCCESS | 停止 | ⚠️ セキュリティ警告 |
| main | No | FAIL | - | FAIL | 停止 | ❌ テスト失敗 |
| develop | No | PASS | PASS | SUCCESS | スキップ | ✅ 開発ブランチ成功 |
| feature/* | Yes | PASS | PASS | SUCCESS | スキップ | ✅ PR検証成功 |
| feature/* | Yes | FAIL | - | FAIL | 停止 | ❌ PR検証失敗 |

### 4. レポート生成決定表

| テスト実行 | スクリーンショット | DB接続 | PDF | Excel | CSV | 添付ファイル |
|-----------|-------------------|--------|-----|-------|-----|-------------|
| 成功 | 成功 | 成功 | ✅ | ✅ (3シート) | ✅ | 画像 + ログ |
| 成功 | 失敗 | 成功 | ✅ | ✅ (2シート) | ✅ | ログのみ |
| 成功 | 成功 | 失敗 | ✅ | ❌ | ✅ | 画像のみ |
| 失敗 | - | - | ✅ (エラー) | ❌ | ❌ | エラーログ |

### 5. エラーハンドリング決定表

| エラータイプ | 継続可能 | フォールバック | レポート | 通知レベル |
|-------------|----------|---------------|----------|-----------|
| DB接続エラー | ❌ | SQLite切替 | エラー詳細 | CRITICAL |
| ブラウザエラー | ✅ | HTML表示 | 警告付き | WARNING |
| ファイルI/Oエラー | ✅ | 代替パス | 警告付き | WARNING |
| ネットワークエラー | ✅ | リトライ3回 | タイムアウト | INFO |
| メモリ不足 | ❌ | プロセス再起動 | システムエラー | CRITICAL |

## 決定ルール

### テスト実行優先度
1. **HIGH**: 商品一覧表示、CRUD操作
2. **MEDIUM**: レポート生成、スクリーンショット
3. **LOW**: パフォーマンス、UI詳細

### 失敗時の対応
1. **即座停止**: DB接続失敗、アプリ起動失敗
2. **警告継続**: スクリーンショット失敗、ファイルI/O
3. **リトライ**: ネットワーク関連、一時的エラー

### レポート生成ポリシー
- **必須**: PDF レポート (常に生成)
- **推奨**: Excel レポート (DB接続時)
- **オプション**: CSV レポート (軽量版)